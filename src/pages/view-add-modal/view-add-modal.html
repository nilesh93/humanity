<!--
  Generated template for the ViewAddModal page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar color="md-blue">
    <ion-title>Advertisement</ion-title>
    <ion-buttons end>
      <button ion-button (click)="dismiss()">
      Close
      </button>
    </ion-buttons>
  </ion-navbar>

</ion-header>


<ion-content>
  <ion-list *ngIf="advert._company">
    <ion-item>
      <ion-avatar item-left>
        <img [src]="imgUrl">
      </ion-avatar>
      <h2>{{advert.title}}</h2>
      <h3>{{advert._company.name}}</h3>
    </ion-item>
  </ion-list>
  <div *ngIf="advert._company">
    <video *ngIf="videoUrl" [controls]="true" preload="metadata" [autoplay]="false" (ended)="onPlayEnd()" class="videoPlayer">
      <source [src]="videoUrl" type="video/mp4" />
    </video>
    <img *ngIf="!videoUrl" src="assets/img/video-not-available.gif" class="videoPlayer" alt="">
  </div>
  <ion-list *ngIf="advert._company">
    <ion-item *ngIf="!available.status">
      <button ion-button block round outline color="primary">Watch again after {{available.available_in | date}} </button>
    </ion-item>
    <ion-item *ngIf="available.status" no-lines>
      <button ion-button block round outline color="md-blue" (click)="watchVideo()">Watch now and earn Rs.{{advert.price_per_view | number:'1.2-2'}}</button>
    </ion-item>
    <ion-list-header style="margin-bottom:0cm">
      Advertisement Details
    </ion-list-header>

    <button ion-item>
    <ion-icon name="play" item-left></ion-icon>
   Rs.{{advert.price_per_view | number:'1.2-2'}} per View
  </button>
    <button ion-item>
    <ion-icon name="eye" item-left></ion-icon>
      {{advert.total_views}} Views
  </button>
    <button ion-item>
    <ion-icon name="card" item-left></ion-icon>
      Rs. {{(advert.price_per_view * advert.views | number:'1.2-2' )}} Donated
  </button>
    <button ion-item>
    <ion-icon name="clock" item-left></ion-icon>
      Expires in  {{advert.expiration_date | date}}
  </button>
  </ion-list>
</ion-content>